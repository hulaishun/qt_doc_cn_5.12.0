<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- appstore.qdoc -->
  <title>Registering Products in App Store | Qt Purchasing 5.12</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
  <div class="main">
    <div class="main-rounded">
      <div class="navigationbar">
        <table><tr>
<td ><a href="../qtdoc/index.html">Qt 5.12</a></td><td ><a href="qtpurchasing-index.html">Qt采购</a></td><td >Registering Products in App Store</td></tr></table><table class="buildversion"><tr>
<td id="buildversion" width="100%" align="right">Qt5.12.0参考文档</td>
        </tr></table>
      </div>
    </div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3><a name="toc">目录</a></h3>
<ul>
<li class="level1"><a href="#register-a-unique-app-id">Register a Unique App ID</a></li>
<li class="level1"><a href="#create-a-provisioning-profile">Create a Provisioning Profile</a></li>
<li class="level1"><a href="#register-your-application">Register Your Application</a></li>
<li class="level1"><a href="#register-the-products">Register the Products</a></li>
<li class="level1"><a href="#create-an-itunes-test-user">Create an iTunes Test User</a></li>
<li class="level1"><a href="#using-the-sandbox-app-store">Using the Sandbox App Store</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">Registering Products in App Store</h1>
<span class="subtitle"></span>
<!-- $$$qtpurchasing-appstore.html-description -->
<div class="descr"> <a name="details"></a>
<p>To take advantage of in-app purchasing functionality on iOS, register your application and all the available products in <a href="http://itunesconnect.apple.com">iTunes Connect</a>. This guide provides a brief introduction on how to register an application and it's in-app products on App Store.</p>
<p>In-App purchasing can only be tested on the actual hardware for the iOS platform. For more information refer to the <a href="http://developer.apple.com/in-app-purchase/">iOS documentation</a>.</p>
<a name="register-a-unique-app-id"></a>
<h2 id="register-a-unique-app-id">Register a Unique App ID</h2>
<p>One of the requirements to support in-app purchases on iOS is to have a registered unique App ID. This means that it is not possible to use an App ID that contains a wildcard character. You can check the existing App IDs and create new ones from the <a href="https://developer.apple.com/account/ios/identifiers/bundle/bundleList.action">Apple Developer Certificate, Identifiers, and Profiles manager</a>.</p>
<p>In the <b>App IDs</b> tab of the <b>Developer Certificate, Identifiers, and Profiles</b> manager, click the <b>+</b> button to create a New App ID. This will open up the page to register a new iOS App ID.</p>
<p>Give your App a relevant ID description and prefix. Your App ID Suffix should be an Explicit App ID type. Enter a unique App ID in the Bundle ID field. It is recommended to use the com.mycompany.myappname convention for App ID. Where, the &quot;com.mycompany&quot; is the Internet domain name of the publisher.</p>
<p>In the <b>App Services</b> area make sure that the <b>In-App Purchases</b> is checked. Click <b>continue</b> your to complete the App ID registration.</p>
<a name="create-a-provisioning-profile"></a>
<h2 id="create-a-provisioning-profile">Create a Provisioning Profile</h2>
<p>To be able to use your new App ID, generate a new provision profile that includes the new ID to sign and run your app. Provisioning Profiles are also managed through the <b>Apple Developer Certificate, Identifiers, and Profiles</b> manager.</p>
<p>Navigate to the <b>Provisioning Profiles</b> tab of the manager and click the <b>+</b> button to create a new Provisioning Profile. Make sure that the <b>iOS App Development</b> is selected and click the <b>Continue</b> button.</p>
<p>You are now given an option to choose the App ID to use for this profile, which will be the unique App ID you created in the previous section. Once again make sure that the App ID does not contain any wildcard characters (“*”) as it is not be possible to use the In-App Purchasing service with such an App ID.</p>
<p>On the next page you will need to select the certificates that will be distributed with your Provisioning Profile. You would have needed to uploaded a certificate on your local development machine to the Apple Developer Certificate, Identifiers, and Profiles manger previously. Generally you will want to add any certificates of the members of your team who will need to build your App.</p>
<p>On the next page you will need to select the devices you will be developing and testing your app on. You must register your devices to the Apple Developer Certificate, Identifiers, and Profiles manger previously. The devices you select here are the only ones capable of running apps signed against this provisioning profile, so select all the devices you intend use during the development and testing phase.</p>
<p>Give your Provisioning Profile a descriptive display name, and click <b>Generate</b> to create the actual profile. When this process is completed you’ll be given a choice to download the Provisioning Profile.</p>
<p>Open the downloaded file in XCode to install. Now the next time you plug in one of the registered devices, your Provisioning Profile should be installed to it automatically.</p>
<a name="register-your-application"></a>
<h2 id="register-your-application">Register Your Application</h2>
<p>Before you can register new products available to the in-app purchasing service, you need to register your application in iTunes Connect. iTunes Connect is the place where you register an app when you want to submit it to the Apple iOS App Store.</p>
<p>Start by going to <a href="https://itunesconnect.apple.com">iTunes Connect</a> and logging in. Once logged in open the <b>Manage your Apps</b> link. If you have already registered your app here, you can skip the registration step, otherwise click the <b>Add New App</b> button in the top left corner of the page.</p>
<p>Select iOS App and then proceed to fill out the required information on the next page. When you get to the <b>Bundle ID</b> section select the unique App ID we created in the previous steps.</p>
<p>It is likely at this point that you do not have all the necessary details to complete the information required to register your app. For now, just fill out the forms with stub data as everything except the <b>SKU</b> and <b>Version</b> fields are editable later.</p>
<a name="register-the-products"></a>
<h2 id="register-the-products">Register the Products</h2>
<p>Once your app is registered in iTunes Connect you will have additional options available to manage that App. In the <b>Manage Your Apps</b> page of iTunes Connect, click the icon representing your app to manage its details. Within this menu you can select the <b>Manage In-App Purchases</b> button on the right to register in-app products you wish to offer.</p>
<p>To register a new product, click the <b>Create New</b> button in the top left corner of the page. The first choice you will be given is the type of in-app purchase you would like to create. The Qt Purchasing API currently only supports Consumable and Non-Consumable types so limit your selection to these. See <a href="qinappproduct.html">QInAppProduct</a> for an explanation about the different product types.</p>
<p>On the next page, you must fill out the details about your product. The <b>Reference Name</b> field refers to how the product will be displayed in iTunes Connect and in sales reports, but not in the App Store itself. The <b>Product ID</b> field is very important as it is the unique ID that will be used to query for the product from your app itself. If possible make this the same ID as the corresponding products in the other platform’s stores, otherwise you will have to conditional logic in your app for each platform when specifying product identifiers.</p>
<p>Select the pricing and availability details for you product next. For the iOS App Store, pricing is set via a tier system. Each tier represents a price level in each iOS App Store region. Your end users will be given the actual price expected for a product in terms of what region their App Store is in.</p>
<p>In the next section <b>In-App Purchase Details</b> you specify the details for at least one language. When the app requests the product details like <code>title</code> and <code>description</code>, they will be provided in the language of their locale if they are available. Create language details for the regions you expect to distribute app in.</p>
<p>Finally, you will need to attach a screenshot that will be used for review purposes. This again can be a stub for now, but your product will need to pass the review before it can go live to be sold in your published app. Click <b>save</b> to complete the product registration.</p>
<a name="create-an-itunes-test-user"></a>
<h2 id="create-an-itunes-test-user">Create an iTunes Test User</h2>
<p>Once your products are registered you will be able to purchase them from your app. When you are developing your app it is desirable to test buying your products without spending real currency. There are actually two separate stores that requests can be sent to when using the In-App Purchasing service on iOS. While your app is being developed, any iOS App Store requests will be sent to a sandbox store. This occurs when your app has been signed with a developer Provisioning Profile. The sandbox store will only accept requests from test users and will not charge for the purchases. However, when you submit your app to the iOS App Store and it is accepted, all in-app purchasing requests are sent to the production store, which requires real iTunes users accounts, and will charge for the purchases.</p>
<p>To create an iTunes test user, log into <a href="https://itunesconnect.apple.com">iTunes Connect</a>.</p>
<p>Select the <b>Manage Users</b> link on the left and click the <b>Test User</b> button. Here you will see any existing iTunes test users associated with your account. To add a new iTunes test user, click the <b>Add New User</b> button on the top left corner of the page. Fill out the details to your preference, bearing in mind that the most important selection is the <b>Select iTunes Store</b>, which specifies the store region your users will be testing from.</p>
<a name="using-the-sandbox-app-store"></a>
<h2 id="using-the-sandbox-app-store">Using the Sandbox App Store</h2>
<p>Once you have created your iTunes test user, you will be able to log in to the sandbox app store when developing your app.</p>
<p>It is important that you first log out of the current iTunes user on your Apple device. To do this, open the <b>Settings</b> app from the homescreen and go to the <b>iTunes &amp; App Store</b> entry. Click the first entry (which should be <b>Apple ID</b>) and select <b>Sign Out</b>.</p>
<p>Do not sign in with your iTunes test user from the Settings App as this connects to the production App Store and your purchase request will fail.</p>
<p>The first time your App makes a request to the sandbox App Store it will request that you login. This is where you should log in using your iTunes test user credentials.</p>
</div>
<!-- @@@qtpurchasing-appstore.html -->
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2018 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.<br/>    Qt and respective logos are trademarks of The Qt Company Ltd.     in Finland and/or other countries worldwide. All other trademarks are property
   of their respective owners. </p>
</div>
</body>
</html>
