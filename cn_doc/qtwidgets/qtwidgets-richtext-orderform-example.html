<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- orderform.qdoc -->
  <title>Order Form Example | Qt Widgets 5.12</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
  <div class="main">
    <div class="main-rounded">
      <div class="navigationbar">
        <table><tr>
<td ><a href="../qtdoc/index.html">Qt 5.12</a></td><td ><a href="qtwidgets-index.html">Qt部件</a></td><td ><a href="examples-richtext.html">Rich Text Examples</a></td><td >Order Form Example</td></tr></table><table class="buildversion"><tr>
<td id="buildversion" width="100%" align="right">Qt5.12.0参考文档</td>
        </tr></table>
      </div>
    </div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3><a name="toc">目录</a></h3>
<ul>
<li class="level1"><a href="#detailsdialog-definition">DetailsDialog Definition</a></li>
<li class="level1"><a href="#detailsdialog-implementation">DetailsDialog Implementation</a></li>
<li class="level1"><a href="#mainwindow-definition">MainWindow Definition</a></li>
<li class="level1"><a href="#mainwindow-implementation">MainWindow Implementation</a></li>
<li class="level1"><a href="#main-function"><code>main()</code> Function</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">Order Form Example</h1>
<span class="subtitle"></span>
<!-- $$$richtext/orderform-brief -->
<p>The Order Form example shows how to generate rich text documents by combining a simple template with data input by the user in a dialog.</p>
<!-- @@@richtext/orderform -->
<!-- $$$richtext/orderform-description -->
<div class="descr"> <a name="details"></a>
<p class="centerAlign"><img src="images/orderform-example.png" alt="" /></p><a name="detailsdialog-definition"></a>
<h2 id="detailsdialog-definition">DetailsDialog Definition</h2>
<p>The <code>DetailsDialog</code> class is a subclass of <a href="qdialog.html">QDialog</a>, implementing a slot <code>verify()</code> to allow contents of the <code>DetailsDialog</code> to be verified later. This is further explained in <code>DetailsDialog</code> Implementation.</p>
<pre class="cpp">

  <span class="keyword">class</span> DetailsDialog : <span class="keyword">public</span> <span class="type"><a href="qdialog.html">QDialog</a></span>
  {
      Q_OBJECT

  <span class="keyword">public</span>:
      DetailsDialog(<span class="keyword">const</span> <span class="type"><a href="../qtcore/qstring.html">QString</a></span> <span class="operator">&amp;</span>title<span class="operator">,</span> <span class="type"><a href="qwidget.html">QWidget</a></span> <span class="operator">*</span>parent);

  <span class="keyword">public</span> <span class="keyword">slots</span>:
      <span class="type">void</span> verify();

  <span class="keyword">public</span>:
      <span class="type"><a href="../qtcore/qlist.html">QList</a></span><span class="operator">&lt;</span><span class="type"><a href="../qtcore/qpair.html">QPair</a></span><span class="operator">&lt;</span><span class="type"><a href="../qtcore/qstring.html">QString</a></span><span class="operator">,</span> <span class="type">int</span><span class="operator">&gt;</span> <span class="operator">&gt;</span> orderItems();
      <span class="type"><a href="../qtcore/qstring.html">QString</a></span> senderName() <span class="keyword">const</span>;
      <span class="type"><a href="../qtcore/qstring.html">QString</a></span> senderAddress() <span class="keyword">const</span>;
      bool sendOffers();

  <span class="keyword">private</span>:
      <span class="type">void</span> setupItemsTable();

      <span class="type"><a href="qlabel.html">QLabel</a></span> <span class="operator">*</span>nameLabel;
      <span class="type"><a href="qlabel.html">QLabel</a></span> <span class="operator">*</span>addressLabel;
      <span class="type"><a href="qcheckbox.html">QCheckBox</a></span> <span class="operator">*</span>offersCheckBox;
      <span class="type"><a href="qlineedit.html">QLineEdit</a></span> <span class="operator">*</span>nameEdit;
      <span class="type"><a href="../qtcore/qstringlist.html">QStringList</a></span> items;
      <span class="type"><a href="qtablewidget.html">QTableWidget</a></span> <span class="operator">*</span>itemsTable;
      <span class="type"><a href="qtextedit.html">QTextEdit</a></span> <span class="operator">*</span>addressEdit;
      <span class="type"><a href="qdialogbuttonbox.html">QDialogButtonBox</a></span> <span class="operator">*</span>buttonBox;
  };

</pre>
<p>The constructor of <code>DetailsDialog</code> accepts parameters <i>title</i> and <i>parent</i>. The class defines four <i>getter</i> functions: <code>orderItems()</code>, <code>senderName()</code>, <code>senderAddress()</code>, and <code>sendOffers()</code> to allow data to be accessed externally.</p>
<p>The class definition includes input widgets for the required fields, <code>nameEdit</code> and <code>addressEdit</code>. Also, a <a href="qcheckbox.html">QCheckBox</a> and a <a href="qdialogbuttonbox.html">QDialogButtonBox</a> are defined; the former to provide the user with the option to receive information on products and offers, and the latter to ensure that buttons used are arranged according to the user's native platform. In addition, a <a href="qtablewidget.html">QTableWidget</a>, <code>itemsTable</code>, is used to hold order details.</p>
<p>The screenshot below shows the <code>DetailsDialog</code> we intend to create.</p>
<p class="centerAlign"><img src="images/orderform-example-detailsdialog.png" alt="" /></p><a name="detailsdialog-implementation"></a>
<h2 id="detailsdialog-implementation">DetailsDialog Implementation</h2>
<p>The constructor of <code>DetailsDialog</code> instantiates the earlier defined fields and their respective labels. The label for <code>offersCheckBox</code> is set and the <code>setupItemsTable()</code> function is invoked to setup and populate <code>itemsTable</code>. The <a href="qdialogbuttonbox.html">QDialogButtonBox</a> object, <code>buttonBox</code>, is instantiated with <b>OK</b> and <b>Cancel</b> buttons. This <code>buttonBox</code>'s <code>accepted()</code> and <code>rejected()</code> signals are connected to the <code>verify()</code> and <code>reject()</code> slots in <code>DetailsDialog</code>.</p>
<pre class="cpp">

  DetailsDialog<span class="operator">::</span>DetailsDialog(<span class="keyword">const</span> <span class="type"><a href="../qtcore/qstring.html">QString</a></span> <span class="operator">&amp;</span>title<span class="operator">,</span> <span class="type"><a href="qwidget.html">QWidget</a></span> <span class="operator">*</span>parent)
      : <span class="type"><a href="qdialog.html">QDialog</a></span>(parent)
  {
      nameLabel <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qlabel.html">QLabel</a></span>(tr(<span class="string">&quot;Name:&quot;</span>));
      addressLabel <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qlabel.html">QLabel</a></span>(tr(<span class="string">&quot;Address:&quot;</span>));
      addressLabel<span class="operator">-</span><span class="operator">&gt;</span>setAlignment(<span class="type"><a href="../qtcore/qt.html">Qt</a></span><span class="operator">::</span>AlignLeft <span class="operator">|</span> <span class="type"><a href="../qtcore/qt.html">Qt</a></span><span class="operator">::</span>AlignTop);

      nameEdit <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qlineedit.html">QLineEdit</a></span>;
      addressEdit <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qtextedit.html">QTextEdit</a></span>;

      offersCheckBox <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qcheckbox.html">QCheckBox</a></span>(tr(<span class="string">&quot;Send information about products and &quot;</span>
                                        <span class="string">&quot;special offers&quot;</span>));

      setupItemsTable();

      buttonBox <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qdialogbuttonbox.html">QDialogButtonBox</a></span>(<span class="type"><a href="qdialogbuttonbox.html">QDialogButtonBox</a></span><span class="operator">::</span>Ok
                                       <span class="operator">|</span> <span class="type"><a href="qdialogbuttonbox.html">QDialogButtonBox</a></span><span class="operator">::</span>Cancel);

      connect(buttonBox<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qdialogbuttonbox.html">QDialogButtonBox</a></span><span class="operator">::</span>accepted<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>DetailsDialog<span class="operator">::</span>verify);
      connect(buttonBox<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qdialogbuttonbox.html">QDialogButtonBox</a></span><span class="operator">::</span>rejected<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>DetailsDialog<span class="operator">::</span>reject);

</pre>
<p>A <a href="qgridlayout.html">QGridLayout</a> is used to place all the objects on the <code>DetailsDialog</code>.</p>
<pre class="cpp">

      <span class="type"><a href="qgridlayout.html">QGridLayout</a></span> <span class="operator">*</span>mainLayout <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qgridlayout.html">QGridLayout</a></span>;
      mainLayout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(nameLabel<span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span>);
      mainLayout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(nameEdit<span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">1</span>);
      mainLayout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(addressLabel<span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">0</span>);
      mainLayout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(addressEdit<span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">1</span>);
      mainLayout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(itemsTable<span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">2</span><span class="operator">,</span> <span class="number">2</span><span class="operator">,</span> <span class="number">1</span>);
      mainLayout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(offersCheckBox<span class="operator">,</span> <span class="number">2</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">2</span>);
      mainLayout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(buttonBox<span class="operator">,</span> <span class="number">3</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">3</span>);
      setLayout(mainLayout);

      setWindowTitle(title);
  }

</pre>
<p>The <code>setupItemsTable()</code> function instantiates the <a href="qtablewidget.html">QTableWidget</a> object, <code>itemsTable</code>, and sets the number of rows based on the <a href="../qtcore/qstringlist.html">QStringList</a> object, <code>items</code>, which holds the type of items ordered. The number of columns is set to 2, providing a &quot;name&quot; and &quot;quantity&quot; layout. A <code>for</code> loop is used to populate the <code>itemsTable</code> and the <code>name</code> item's flag is set to <a href="../qtcore/qt.html#ItemFlag-enum">Qt::ItemIsEnabled</a> or <a href="../qtcore/qt.html#ItemFlag-enum">Qt::ItemIsSelectable</a>. For demonstration purposes, the <code>quantity</code> item is set to a 1 and all items in the <code>itemsTable</code> have this value for quantity; but this can be modified by editing the contents of the cells at run time.</p>
<pre class="cpp">

  <span class="type">void</span> DetailsDialog<span class="operator">::</span>setupItemsTable()
  {
      items <span class="operator">&lt;</span><span class="operator">&lt;</span> tr(<span class="string">&quot;T-shirt&quot;</span>) <span class="operator">&lt;</span><span class="operator">&lt;</span> tr(<span class="string">&quot;Badge&quot;</span>) <span class="operator">&lt;</span><span class="operator">&lt;</span> tr(<span class="string">&quot;Reference book&quot;</span>)
            <span class="operator">&lt;</span><span class="operator">&lt;</span> tr(<span class="string">&quot;Coffee cup&quot;</span>);

      itemsTable <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qtablewidget.html">QTableWidget</a></span>(items<span class="operator">.</span>count()<span class="operator">,</span> <span class="number">2</span>);

      <span class="keyword">for</span> (<span class="type">int</span> row <span class="operator">=</span> <span class="number">0</span>; row <span class="operator">&lt;</span> items<span class="operator">.</span>count(); <span class="operator">+</span><span class="operator">+</span>row) {
          <span class="type"><a href="qtablewidgetitem.html">QTableWidgetItem</a></span> <span class="operator">*</span>name <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qtablewidgetitem.html">QTableWidgetItem</a></span>(items<span class="operator">[</span>row<span class="operator">]</span>);
          name<span class="operator">-</span><span class="operator">&gt;</span>setFlags(<span class="type"><a href="../qtcore/qt.html">Qt</a></span><span class="operator">::</span>ItemIsEnabled <span class="operator">|</span> <span class="type"><a href="../qtcore/qt.html">Qt</a></span><span class="operator">::</span>ItemIsSelectable);
          itemsTable<span class="operator">-</span><span class="operator">&gt;</span>setItem(row<span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> name);
          <span class="type"><a href="qtablewidgetitem.html">QTableWidgetItem</a></span> <span class="operator">*</span>quantity <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qtablewidgetitem.html">QTableWidgetItem</a></span>(<span class="string">&quot;1&quot;</span>);
          itemsTable<span class="operator">-</span><span class="operator">&gt;</span>setItem(row<span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> quantity);
      }
  }

</pre>
<p>The <code>orderItems()</code> function extracts data from the <code>itemsTable</code> and returns it in the form of a <a href="../qtcore/qlist.html">QList</a>&lt;<a href="../qtcore/qpair.html">QPair</a>&lt;<a href="../qtcore/qstring.html">QString</a>,int&gt;&gt; where each <a href="../qtcore/qpair.html">QPair</a> corresponds to an item and the quantity ordered.</p>
<pre class="cpp">

  <span class="type"><a href="../qtcore/qlist.html">QList</a></span><span class="operator">&lt;</span><span class="type"><a href="../qtcore/qpair.html">QPair</a></span><span class="operator">&lt;</span><span class="type"><a href="../qtcore/qstring.html">QString</a></span><span class="operator">,</span> <span class="type">int</span><span class="operator">&gt;</span> <span class="operator">&gt;</span> DetailsDialog<span class="operator">::</span>orderItems()
  {
      <span class="type"><a href="../qtcore/qlist.html">QList</a></span><span class="operator">&lt;</span><span class="type"><a href="../qtcore/qpair.html">QPair</a></span><span class="operator">&lt;</span><span class="type"><a href="../qtcore/qstring.html">QString</a></span><span class="operator">,</span> <span class="type">int</span><span class="operator">&gt;</span> <span class="operator">&gt;</span> orderList;

      <span class="keyword">for</span> (<span class="type">int</span> row <span class="operator">=</span> <span class="number">0</span>; row <span class="operator">&lt;</span> items<span class="operator">.</span>count(); <span class="operator">+</span><span class="operator">+</span>row) {
          <span class="type"><a href="../qtcore/qpair.html">QPair</a></span><span class="operator">&lt;</span><span class="type"><a href="../qtcore/qstring.html">QString</a></span><span class="operator">,</span> <span class="type">int</span><span class="operator">&gt;</span> item;
          item<span class="operator">.</span>first <span class="operator">=</span> itemsTable<span class="operator">-</span><span class="operator">&gt;</span>item(row<span class="operator">,</span> <span class="number">0</span>)<span class="operator">-</span><span class="operator">&gt;</span>text();
          <span class="type">int</span> quantity <span class="operator">=</span> itemsTable<span class="operator">-</span><span class="operator">&gt;</span>item(row<span class="operator">,</span> <span class="number">1</span>)<span class="operator">-</span><span class="operator">&gt;</span>data(<span class="type"><a href="../qtcore/qt.html">Qt</a></span><span class="operator">::</span>DisplayRole)<span class="operator">.</span>toInt();
          item<span class="operator">.</span>second <span class="operator">=</span> <a href="../qtcore/qtglobal.html#qMax">qMax</a>(<span class="number">0</span><span class="operator">,</span> quantity);
          orderList<span class="operator">.</span>append(item);
      }

      <span class="keyword">return</span> orderList;
  }

</pre>
<p>The <code>senderName()</code> function is used to return the value of the <a href="qlineedit.html">QLineEdit</a> used to store the name field for the order form.</p>
<pre class="cpp">

  <span class="type"><a href="../qtcore/qstring.html">QString</a></span> DetailsDialog<span class="operator">::</span>senderName() <span class="keyword">const</span>
  {
      <span class="keyword">return</span> nameEdit<span class="operator">-</span><span class="operator">&gt;</span>text();
  }

</pre>
<p>The <code>senderAddress()</code> function is used to return the value of the <a href="qtextedit.html">QTextEdit</a> containing the address for the order form.</p>
<pre class="cpp">

  <span class="type"><a href="../qtcore/qstring.html">QString</a></span> DetailsDialog<span class="operator">::</span>senderAddress() <span class="keyword">const</span>
  {
      <span class="keyword">return</span> addressEdit<span class="operator">-</span><span class="operator">&gt;</span>toPlainText();
  }

</pre>
<p>The <code>sendOffers()</code> function is used to return a <code>true</code> or <code>false</code> value that is used to determine if the customer in the order form wishes to receive more information on the company's offers and promotions.</p>
<pre class="cpp">

  bool DetailsDialog<span class="operator">::</span>sendOffers()
  {
      <span class="keyword">return</span> offersCheckBox<span class="operator">-</span><span class="operator">&gt;</span>isChecked();
  }

</pre>
<p>The <code>verify()</code> function is an additionally implemented slot used to verify the details entered by the user into the <code>DetailsDialog</code>. If the details entered are incomplete, a <a href="qmessagebox.html">QMessageBox</a> is displayed providing the user the option to discard the <code>DetailsDialog</code>. Otherwise, the details are accepted and the <code>accept()</code> function is invoked.</p>
<pre class="cpp">

  <span class="type">void</span> DetailsDialog<span class="operator">::</span>verify()
  {
      <span class="keyword">if</span> (<span class="operator">!</span>nameEdit<span class="operator">-</span><span class="operator">&gt;</span>text()<span class="operator">.</span>isEmpty() <span class="operator">&amp;</span><span class="operator">&amp;</span> <span class="operator">!</span>addressEdit<span class="operator">-</span><span class="operator">&gt;</span>toPlainText()<span class="operator">.</span>isEmpty()) {
          accept();
          <span class="keyword">return</span>;
      }

      <span class="type"><a href="qmessagebox.html">QMessageBox</a></span><span class="operator">::</span>StandardButton answer;
      answer <span class="operator">=</span> <span class="type"><a href="qmessagebox.html">QMessageBox</a></span><span class="operator">::</span>warning(<span class="keyword">this</span><span class="operator">,</span> tr(<span class="string">&quot;Incomplete Form&quot;</span>)<span class="operator">,</span>
          tr(<span class="string">&quot;The form does not contain all the necessary information.\n&quot;</span>
             <span class="string">&quot;Do you want to discard it?&quot;</span>)<span class="operator">,</span>
          <span class="type"><a href="qmessagebox.html">QMessageBox</a></span><span class="operator">::</span>Yes <span class="operator">|</span> <span class="type"><a href="qmessagebox.html">QMessageBox</a></span><span class="operator">::</span>No);

      <span class="keyword">if</span> (answer <span class="operator">=</span><span class="operator">=</span> <span class="type"><a href="qmessagebox.html">QMessageBox</a></span><span class="operator">::</span>Yes)
          reject();
  }

</pre>
<a name="mainwindow-definition"></a>
<h2 id="mainwindow-definition">MainWindow Definition</h2>
<p>The <code>MainWindow</code> class is a subclass of <a href="qmainwindow.html">QMainWindow</a>, implementing two slots - <code>openDialog()</code> and <code>printFile()</code>. It also contains a private instance of <a href="qtabwidget.html">QTabWidget</a>, <code>letters</code>.</p>
<pre class="cpp">

  <span class="keyword">class</span> MainWindow : <span class="keyword">public</span> <span class="type"><a href="qmainwindow.html">QMainWindow</a></span>
  {
      Q_OBJECT

  <span class="keyword">public</span>:
      MainWindow();
      <span class="type">void</span> createSample();

  <span class="keyword">public</span> <span class="keyword">slots</span>:
      <span class="type">void</span> openDialog();
      <span class="type">void</span> printFile();

  <span class="keyword">private</span>:
      <span class="type">void</span> createLetter(<span class="keyword">const</span> <span class="type"><a href="../qtcore/qstring.html">QString</a></span> <span class="operator">&amp;</span>name<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="../qtcore/qstring.html">QString</a></span> <span class="operator">&amp;</span>address<span class="operator">,</span>
                        <span class="type"><a href="../qtcore/qlist.html">QList</a></span><span class="operator">&lt;</span><span class="type"><a href="../qtcore/qpair.html">QPair</a></span><span class="operator">&lt;</span><span class="type"><a href="../qtcore/qstring.html">QString</a></span><span class="operator">,</span><span class="type">int</span><span class="operator">&gt;</span> <span class="operator">&gt;</span> orderItems<span class="operator">,</span>
                        bool sendOffers);

      <span class="type"><a href="qaction.html">QAction</a></span> <span class="operator">*</span>printAction;
      <span class="type"><a href="qtabwidget.html">QTabWidget</a></span> <span class="operator">*</span>letters;
  };

</pre>
<a name="mainwindow-implementation"></a>
<h2 id="mainwindow-implementation">MainWindow Implementation</h2>
<p>The <code>MainWindow</code> constructor sets up the <code>fileMenu</code> and the required actions, <code>newAction</code> and <code>printAction</code>. These actions' <code>triggered()</code> signals are connected to the additionally implemented openDialog() slot and the default close() slot. The <a href="qtabwidget.html">QTabWidget</a>, <code>letters</code>, is instantiated and set as the window's central widget.</p>
<pre class="cpp">

  MainWindow<span class="operator">::</span>MainWindow()
  {
      <span class="type"><a href="qmenu.html">QMenu</a></span> <span class="operator">*</span>fileMenu <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qmenu.html">QMenu</a></span>(tr(<span class="string">&quot;&amp;File&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);
      <span class="type"><a href="qaction.html">QAction</a></span> <span class="operator">*</span>newAction <span class="operator">=</span> fileMenu<span class="operator">-</span><span class="operator">&gt;</span>addAction(tr(<span class="string">&quot;&amp;New...&quot;</span>));
      newAction<span class="operator">-</span><span class="operator">&gt;</span>setShortcuts(<span class="type"><a href="../qtgui/qkeysequence.html">QKeySequence</a></span><span class="operator">::</span>New);
      printAction <span class="operator">=</span> fileMenu<span class="operator">-</span><span class="operator">&gt;</span>addAction(tr(<span class="string">&quot;&amp;Print...&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> SLOT(printFile()));
      printAction<span class="operator">-</span><span class="operator">&gt;</span>setShortcuts(<span class="type"><a href="../qtgui/qkeysequence.html">QKeySequence</a></span><span class="operator">::</span>Print);
      printAction<span class="operator">-</span><span class="operator">&gt;</span>setEnabled(<span class="keyword">false</span>);
      <span class="type"><a href="qaction.html">QAction</a></span> <span class="operator">*</span>quitAction <span class="operator">=</span> fileMenu<span class="operator">-</span><span class="operator">&gt;</span>addAction(tr(<span class="string">&quot;E&amp;xit&quot;</span>));
      quitAction<span class="operator">-</span><span class="operator">&gt;</span>setShortcuts(<span class="type"><a href="../qtgui/qkeysequence.html">QKeySequence</a></span><span class="operator">::</span>Quit);
      menuBar()<span class="operator">-</span><span class="operator">&gt;</span>addMenu(fileMenu);

      letters <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qtabwidget.html">QTabWidget</a></span>;

      connect(newAction<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qaction.html">QAction</a></span><span class="operator">::</span>triggered<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>MainWindow<span class="operator">::</span>openDialog);
      connect(quitAction<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qaction.html">QAction</a></span><span class="operator">::</span>triggered<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>MainWindow<span class="operator">::</span>close);

      setCentralWidget(letters);
      setWindowTitle(tr(<span class="string">&quot;Order Form&quot;</span>));
  }

</pre>
<p>The <code>createLetter()</code> function creates a new <a href="qtabwidget.html">QTabWidget</a> with a <a href="qtextedit.html">QTextEdit</a>, <code>editor</code>, as the parent. This function accepts four parameters that correspond to we obtained through <code>DetailsDialog</code>, in order to &quot;fill&quot; the <code>editor</code>.</p>
<pre class="cpp">

  <span class="type">void</span> MainWindow<span class="operator">::</span>createLetter(<span class="keyword">const</span> <span class="type"><a href="../qtcore/qstring.html">QString</a></span> <span class="operator">&amp;</span>name<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="../qtcore/qstring.html">QString</a></span> <span class="operator">&amp;</span>address<span class="operator">,</span>
                                <span class="type"><a href="../qtcore/qlist.html">QList</a></span><span class="operator">&lt;</span><span class="type"><a href="../qtcore/qpair.html">QPair</a></span><span class="operator">&lt;</span><span class="type"><a href="../qtcore/qstring.html">QString</a></span><span class="operator">,</span><span class="type">int</span><span class="operator">&gt;</span> <span class="operator">&gt;</span> orderItems<span class="operator">,</span>
                                bool sendOffers)
  {
      <span class="type"><a href="qtextedit.html">QTextEdit</a></span> <span class="operator">*</span>editor <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qtextedit.html">QTextEdit</a></span>;
      <span class="type">int</span> tabIndex <span class="operator">=</span> letters<span class="operator">-</span><span class="operator">&gt;</span>addTab(editor<span class="operator">,</span> name);
      letters<span class="operator">-</span><span class="operator">&gt;</span>setCurrentIndex(tabIndex);

</pre>
<p>We then obtain the cursor for the <code>editor</code> using <a href="qtextedit.html#textCursor">QTextEdit::textCursor</a>(). The <code>cursor</code> is then moved to the start of the document using <a href="../qtgui/qtextcursor.html#MoveOperation-enum">QTextCursor::Start</a>.</p>
<pre class="cpp">

      <span class="type"><a href="../qtgui/qtextcursor.html">QTextCursor</a></span> cursor(editor<span class="operator">-</span><span class="operator">&gt;</span>textCursor());
      cursor<span class="operator">.</span>movePosition(<span class="type"><a href="../qtgui/qtextcursor.html">QTextCursor</a></span><span class="operator">::</span>Start);

</pre>
<p>Recall the structure of a <a href="../qtgui/richtext-structure.html">Rich Text Document</a>, where sequences of frames and tables are always separated by text blocks, some of which may contain no information.</p>
<p>In the case of the Order Form Example, the document structure for this portion is described by the table below:</p>
<div class="table"><table class="generic">
 <tr valign="top" class="odd"><td  rowspan=" 8">frame with <i>referenceFrameFormat</i></td></tr>
<tr valign="top" class="even"><td >block</td><td ><code>A company</code></td></tr>
<tr valign="top" class="odd"><td >block</td></tr>
<tr valign="top" class="even"><td >block</td><td ><code>321 City Street</code></td></tr>
<tr valign="top" class="odd"><td >block</td></tr>
<tr valign="top" class="even"><td >block</td><td ><code>Industry Park</code></td></tr>
<tr valign="top" class="odd"><td >block</td></tr>
<tr valign="top" class="even"><td >block</td><td ><code>Another country</code></td></tr>
</table></div>
<p>This is accomplished with the following code:</p>
<pre class="cpp">

      <span class="type"><a href="../qtgui/qtextframe.html">QTextFrame</a></span> <span class="operator">*</span>topFrame <span class="operator">=</span> cursor<span class="operator">.</span>currentFrame();
      <span class="type"><a href="../qtgui/qtextframeformat.html">QTextFrameFormat</a></span> topFrameFormat <span class="operator">=</span> topFrame<span class="operator">-</span><span class="operator">&gt;</span>frameFormat();
      topFrameFormat<span class="operator">.</span>setPadding(<span class="number">16</span>);
      topFrame<span class="operator">-</span><span class="operator">&gt;</span>setFrameFormat(topFrameFormat);

      <span class="type"><a href="../qtgui/qtextcharformat.html">QTextCharFormat</a></span> textFormat;
      <span class="type"><a href="../qtgui/qtextcharformat.html">QTextCharFormat</a></span> boldFormat;
      boldFormat<span class="operator">.</span>setFontWeight(<span class="type"><a href="../qtgui/qfont.html">QFont</a></span><span class="operator">::</span>Bold);

      <span class="type"><a href="../qtgui/qtextframeformat.html">QTextFrameFormat</a></span> referenceFrameFormat;
      referenceFrameFormat<span class="operator">.</span>setBorder(<span class="number">1</span>);
      referenceFrameFormat<span class="operator">.</span>setPadding(<span class="number">8</span>);
      referenceFrameFormat<span class="operator">.</span>setPosition(<span class="type"><a href="../qtgui/qtextframeformat.html">QTextFrameFormat</a></span><span class="operator">::</span>FloatRight);
      referenceFrameFormat<span class="operator">.</span>setWidth(<span class="type"><a href="../qtgui/qtextlength.html">QTextLength</a></span>(<span class="type"><a href="../qtgui/qtextlength.html">QTextLength</a></span><span class="operator">::</span>PercentageLength<span class="operator">,</span> <span class="number">40</span>));
      cursor<span class="operator">.</span>insertFrame(referenceFrameFormat);

      cursor<span class="operator">.</span>insertText(<span class="string">&quot;A company&quot;</span><span class="operator">,</span> boldFormat);
      cursor<span class="operator">.</span>insertBlock();
      cursor<span class="operator">.</span>insertText(<span class="string">&quot;321 City Street&quot;</span>);
      cursor<span class="operator">.</span>insertBlock();
      cursor<span class="operator">.</span>insertText(<span class="string">&quot;Industry Park&quot;</span>);
      cursor<span class="operator">.</span>insertBlock();
      cursor<span class="operator">.</span>insertText(<span class="string">&quot;Another country&quot;</span>);

</pre>
<p>Note that <code>topFrame</code> is the <code>editor</code>'s top-level frame and is not shown in the document structure.</p>
<p>We then set the <code>cursor</code>'s position back to its last position in <code>topFrame</code> and fill in the customer's name (provided by the constructor) and address - using a <code>foreach</code> loop to traverse the <a href="../qtcore/qstring.html">QString</a>, <code>address</code>.</p>
<pre class="cpp">

      cursor<span class="operator">.</span>setPosition(topFrame<span class="operator">-</span><span class="operator">&gt;</span>lastPosition());

      cursor<span class="operator">.</span>insertText(name<span class="operator">,</span> textFormat);
      <span class="type"><a href="../qtcore/qstring.html">QString</a></span> line;
      foreach (line<span class="operator">,</span> address<span class="operator">.</span>split(<span class="string">&quot;\n&quot;</span>)) {
          cursor<span class="operator">.</span>insertBlock();
          cursor<span class="operator">.</span>insertText(line);
      }

</pre>
<p>The <code>cursor</code> is now back in <code>topFrame</code> and the document structure for the above portion of code is:</p>
<div class="table"><table class="generic">
 <tr valign="top" class="odd"><td >block</td><td ><code>Donald</code></td></tr>
<tr valign="top" class="even"><td >block</td><td ><code>47338 Park Avenue</code></td></tr>
<tr valign="top" class="odd"><td >block</td><td ><code>Big City</code></td></tr>
</table></div>
<p>For spacing purposes, we invoke <a href="../qtgui/qtextcursor.html#insertBlock">insertBlock()</a> twice. The <a href="../qtcore/qdate.html#currentDate">currentDate()</a> is obtained and displayed. We use <a href="../qtgui/qtextframeformat.html#setWidth">setWidth()</a> to increase the width of <code>bodyFrameFormat</code> and we insert a new frame with that width.</p>
<pre class="cpp">

      cursor<span class="operator">.</span>insertBlock();
      cursor<span class="operator">.</span>insertBlock();

      <span class="type"><a href="../qtcore/qdate.html">QDate</a></span> date <span class="operator">=</span> <span class="type"><a href="../qtcore/qdate.html">QDate</a></span><span class="operator">::</span>currentDate();
      cursor<span class="operator">.</span>insertText(tr(<span class="string">&quot;Date: %1&quot;</span>)<span class="operator">.</span>arg(date<span class="operator">.</span>toString(<span class="string">&quot;d MMMM yyyy&quot;</span>))<span class="operator">,</span>
                        textFormat);
      cursor<span class="operator">.</span>insertBlock();

      <span class="type"><a href="../qtgui/qtextframeformat.html">QTextFrameFormat</a></span> bodyFrameFormat;
      bodyFrameFormat<span class="operator">.</span>setWidth(<span class="type"><a href="../qtgui/qtextlength.html">QTextLength</a></span>(<span class="type"><a href="../qtgui/qtextlength.html">QTextLength</a></span><span class="operator">::</span>PercentageLength<span class="operator">,</span> <span class="number">100</span>));
      cursor<span class="operator">.</span>insertFrame(bodyFrameFormat);

</pre>
<p>The following code inserts standard text into the order form.</p>
<pre class="cpp">

      cursor<span class="operator">.</span>insertText(tr(<span class="string">&quot;I would like to place an order for the following &quot;</span>
                           <span class="string">&quot;items:&quot;</span>)<span class="operator">,</span> textFormat);
      cursor<span class="operator">.</span>insertBlock();
      cursor<span class="operator">.</span>insertBlock();

</pre>
<p>This part of the document structure now contains the date, a frame with <code>bodyFrameFormat</code>, as well as the standard text.</p>
<div class="table"><table class="generic">
 <tr valign="top" class="odd"><td >block</td></tr>
<tr valign="top" class="even"><td >block</td></tr>
<tr valign="top" class="odd"><td >block</td><td ><code>Date: 25 May 2007</code></td></tr>
<tr valign="top" class="even"><td >block</td></tr>
<tr valign="top" class="odd"><td  rowspan=" 4">frame with <i>bodyFrameFormat</i></td></tr>
<tr valign="top" class="even"><td >block</td><td ><code>I would like to place an order for the following items:</code></td></tr>
<tr valign="top" class="odd"><td >block</td></tr>
<tr valign="top" class="even"><td >block</td></tr>
</table></div>
<p>A <a href="../qtgui/qtexttableformat.html">QTextTableFormat</a> object, <code>orderTableFormat</code>, is used to hold the type of item and the quantity ordered.</p>
<pre class="cpp">

      <span class="type"><a href="../qtgui/qtexttableformat.html">QTextTableFormat</a></span> orderTableFormat;
      orderTableFormat<span class="operator">.</span>setAlignment(<span class="type"><a href="../qtcore/qt.html">Qt</a></span><span class="operator">::</span>AlignHCenter);
      <span class="type"><a href="../qtgui/qtexttable.html">QTextTable</a></span> <span class="operator">*</span>orderTable <span class="operator">=</span> cursor<span class="operator">.</span>insertTable(<span class="number">1</span><span class="operator">,</span> <span class="number">2</span><span class="operator">,</span> orderTableFormat);

      <span class="type"><a href="../qtgui/qtextframeformat.html">QTextFrameFormat</a></span> orderFrameFormat <span class="operator">=</span> cursor<span class="operator">.</span>currentFrame()<span class="operator">-</span><span class="operator">&gt;</span>frameFormat();
      orderFrameFormat<span class="operator">.</span>setBorder(<span class="number">1</span>);
      cursor<span class="operator">.</span>currentFrame()<span class="operator">-</span><span class="operator">&gt;</span>setFrameFormat(orderFrameFormat);

</pre>
<p>We use <a href="../qtgui/qtexttable.html#cellAt-2">cellAt()</a> to set the headers for the <code>orderTable</code>.</p>
<pre class="cpp">

      cursor <span class="operator">=</span> orderTable<span class="operator">-</span><span class="operator">&gt;</span>cellAt(<span class="number">0</span><span class="operator">,</span> <span class="number">0</span>)<span class="operator">.</span>firstCursorPosition();
      cursor<span class="operator">.</span>insertText(tr(<span class="string">&quot;Product&quot;</span>)<span class="operator">,</span> boldFormat);
      cursor <span class="operator">=</span> orderTable<span class="operator">-</span><span class="operator">&gt;</span>cellAt(<span class="number">0</span><span class="operator">,</span> <span class="number">1</span>)<span class="operator">.</span>firstCursorPosition();
      cursor<span class="operator">.</span>insertText(tr(<span class="string">&quot;Quantity&quot;</span>)<span class="operator">,</span> boldFormat);

</pre>
<p>Then, we iterate through the <a href="../qtcore/qlist.html">QList</a> of <a href="../qtcore/qpair.html">QPair</a> objects to populate <code>orderTable</code>.</p>
<pre class="cpp">

      <span class="keyword">for</span> (<span class="type">int</span> i <span class="operator">=</span> <span class="number">0</span>; i <span class="operator">&lt;</span> orderItems<span class="operator">.</span>count(); <span class="operator">+</span><span class="operator">+</span>i) {
          <span class="type"><a href="../qtcore/qpair.html">QPair</a></span><span class="operator">&lt;</span><span class="type"><a href="../qtcore/qstring.html">QString</a></span><span class="operator">,</span><span class="type">int</span><span class="operator">&gt;</span> item <span class="operator">=</span> orderItems<span class="operator">[</span>i<span class="operator">]</span>;
          <span class="type">int</span> row <span class="operator">=</span> orderTable<span class="operator">-</span><span class="operator">&gt;</span>rows();

          orderTable<span class="operator">-</span><span class="operator">&gt;</span>insertRows(row<span class="operator">,</span> <span class="number">1</span>);
          cursor <span class="operator">=</span> orderTable<span class="operator">-</span><span class="operator">&gt;</span>cellAt(row<span class="operator">,</span> <span class="number">0</span>)<span class="operator">.</span>firstCursorPosition();
          cursor<span class="operator">.</span>insertText(item<span class="operator">.</span>first<span class="operator">,</span> textFormat);
          cursor <span class="operator">=</span> orderTable<span class="operator">-</span><span class="operator">&gt;</span>cellAt(row<span class="operator">,</span> <span class="number">1</span>)<span class="operator">.</span>firstCursorPosition();
          cursor<span class="operator">.</span>insertText(<span class="type"><a href="../qtcore/qstring.html">QString</a></span>(<span class="string">&quot;%1&quot;</span>)<span class="operator">.</span>arg(item<span class="operator">.</span>second)<span class="operator">,</span> textFormat);
      }

</pre>
<p>The resulting document structure for this section is:</p>
<div class="table"><table class="generic">
 <tr valign="top" class="odd"><td  rowspan=" 11"><code>orderTable</code> with <i>orderTableFormat</i></td></tr>
<tr valign="top" class="even"><td >block</td><td ><code>Product</code></td></tr>
<tr valign="top" class="odd"><td >block</td><td ><code>Quantity</code></td></tr>
<tr valign="top" class="even"><td >block</td><td ><code>T-shirt</code></td></tr>
<tr valign="top" class="odd"><td >block</td><td ><code>4</code></td></tr>
<tr valign="top" class="even"><td >block</td><td ><code>Badge</code></td></tr>
<tr valign="top" class="odd"><td >block</td><td ><code>3</code></td></tr>
<tr valign="top" class="even"><td >block</td><td ><code>Reference book</code></td></tr>
<tr valign="top" class="odd"><td >block</td><td ><code>2</code></td></tr>
<tr valign="top" class="even"><td >block</td><td ><code>Coffee cup</code></td></tr>
<tr valign="top" class="odd"><td >block</td><td ><code>5</code></td></tr>
</table></div>
<p>The <code>cursor</code> is then moved back to <code>topFrame</code>'s <a href="../qtgui/qtextframe.html#lastPosition">lastPosition()</a> and more standard text is inserted.</p>
<pre class="cpp">

      cursor<span class="operator">.</span>setPosition(topFrame<span class="operator">-</span><span class="operator">&gt;</span>lastPosition());

      cursor<span class="operator">.</span>insertBlock();
      cursor<span class="operator">.</span>insertText(tr(<span class="string">&quot;Please update my records to take account of the &quot;</span>
                           <span class="string">&quot;following privacy information:&quot;</span>));
      cursor<span class="operator">.</span>insertBlock();

</pre>
<p>Another <a href="../qtgui/qtexttable.html">QTextTable</a> is inserted, to display the customer's preference regarding offers.</p>
<pre class="cpp">

      <span class="type"><a href="../qtgui/qtexttable.html">QTextTable</a></span> <span class="operator">*</span>offersTable <span class="operator">=</span> cursor<span class="operator">.</span>insertTable(<span class="number">2</span><span class="operator">,</span> <span class="number">2</span>);

      cursor <span class="operator">=</span> offersTable<span class="operator">-</span><span class="operator">&gt;</span>cellAt(<span class="number">0</span><span class="operator">,</span> <span class="number">1</span>)<span class="operator">.</span>firstCursorPosition();
      cursor<span class="operator">.</span>insertText(tr(<span class="string">&quot;I want to receive more information about your &quot;</span>
                           <span class="string">&quot;company's products and special offers.&quot;</span>)<span class="operator">,</span> textFormat);
      cursor <span class="operator">=</span> offersTable<span class="operator">-</span><span class="operator">&gt;</span>cellAt(<span class="number">1</span><span class="operator">,</span> <span class="number">1</span>)<span class="operator">.</span>firstCursorPosition();
      cursor<span class="operator">.</span>insertText(tr(<span class="string">&quot;I do not want to receive any promotional information &quot;</span>
                           <span class="string">&quot;from your company.&quot;</span>)<span class="operator">,</span> textFormat);

      <span class="keyword">if</span> (sendOffers)
          cursor <span class="operator">=</span> offersTable<span class="operator">-</span><span class="operator">&gt;</span>cellAt(<span class="number">0</span><span class="operator">,</span> <span class="number">0</span>)<span class="operator">.</span>firstCursorPosition();
      <span class="keyword">else</span>
          cursor <span class="operator">=</span> offersTable<span class="operator">-</span><span class="operator">&gt;</span>cellAt(<span class="number">1</span><span class="operator">,</span> <span class="number">0</span>)<span class="operator">.</span>firstCursorPosition();

      cursor<span class="operator">.</span>insertText(<span class="string">&quot;X&quot;</span><span class="operator">,</span> boldFormat);

</pre>
<p>The document structure for this portion is:</p>
<div class="table"><table class="generic">
 <tr valign="top" class="odd"><td >block</td></tr>
<tr valign="top" class="even"><td >block</td><td ><code>Please update my..&#x2e;</code></td></tr>
<tr valign="top" class="odd"><td  rowspan=" 5">block</td></tr>
<tr valign="top" class="even"><td  rowspan=" 4"><code>offersTable</code></td></tr>
<tr valign="top" class="odd"><td >block</td><td ><code>I want to receive..&#x2e;</code></td></tr>
<tr valign="top" class="even"><td >block</td><td ><code>I do not want to receive..&#x2e;</code></td></tr>
<tr valign="top" class="odd"><td >block</td><td ><code>X</code></td></tr>
</table></div>
<p>The <code>cursor</code> is moved to insert &quot;Sincerely&quot; along with the customer's name. More blocks are inserted for spacing purposes. The <code>printAction</code> is enabled to indicate that an order form can now be printed.</p>
<pre class="cpp">

      cursor<span class="operator">.</span>setPosition(topFrame<span class="operator">-</span><span class="operator">&gt;</span>lastPosition());
      cursor<span class="operator">.</span>insertBlock();
      cursor<span class="operator">.</span>insertText(tr(<span class="string">&quot;Sincerely,&quot;</span>)<span class="operator">,</span> textFormat);
      cursor<span class="operator">.</span>insertBlock();
      cursor<span class="operator">.</span>insertBlock();
      cursor<span class="operator">.</span>insertBlock();
      cursor<span class="operator">.</span>insertText(name);

      printAction<span class="operator">-</span><span class="operator">&gt;</span>setEnabled(<span class="keyword">true</span>);
  }

</pre>
<p>The bottom portion of the document structure is:</p>
<div class="table"><table class="generic">
 <tr valign="top" class="odd"><td >block</td></tr>
<tr valign="top" class="even"><td  rowspan=" 5">block</td><td ><code>Sincerely,</code></td></tr>
<tr valign="top" class="odd"><td >block</td></tr>
<tr valign="top" class="even"><td >block</td></tr>
<tr valign="top" class="odd"><td >block</td></tr>
<tr valign="top" class="even"><td >block</td><td ><code>Donald</code></td></tr>
</table></div>
<p>The <code>createSample()</code> function is used for illustration purposes, to create a sample order form.</p>
<pre class="cpp">

  <span class="type">void</span> MainWindow<span class="operator">::</span>createSample()
  {
      DetailsDialog dialog(<span class="string">&quot;Dialog with default values&quot;</span><span class="operator">,</span> <span class="keyword">this</span>);
      createLetter(<span class="string">&quot;Mr. Smith&quot;</span><span class="operator">,</span> <span class="string">&quot;12 High Street\nSmall Town\nThis country&quot;</span><span class="operator">,</span>
                   dialog<span class="operator">.</span>orderItems()<span class="operator">,</span> <span class="keyword">true</span>);
  }

</pre>
<p>The <code>openDialog()</code> function opens a <code>DetailsDialog</code> object. If the details in <code>dialog</code> are accepted, the <code>createLetter()</code> function is invoked using the parameters extracted from <code>dialog</code>.</p>
<pre class="cpp">

  <span class="type">void</span> MainWindow<span class="operator">::</span>openDialog()
  {
      DetailsDialog dialog(tr(<span class="string">&quot;Enter Customer Details&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);

      <span class="keyword">if</span> (dialog<span class="operator">.</span>exec() <span class="operator">=</span><span class="operator">=</span> <span class="type"><a href="qdialog.html">QDialog</a></span><span class="operator">::</span>Accepted) {
          createLetter(dialog<span class="operator">.</span>senderName()<span class="operator">,</span> dialog<span class="operator">.</span>senderAddress()<span class="operator">,</span>
                       dialog<span class="operator">.</span>orderItems()<span class="operator">,</span> dialog<span class="operator">.</span>sendOffers());
      }
  }

</pre>
<p>In order to print out the order form, a <code>printFile()</code> function is included, as shown below:</p>
<pre class="cpp">

  <span class="type">void</span> MainWindow<span class="operator">::</span>printFile()
  {
  <span class="preprocessor">#if QT_CONFIG(printdialog)</span>
      <span class="type"><a href="qtextedit.html">QTextEdit</a></span> <span class="operator">*</span>editor <span class="operator">=</span> <span class="keyword">static_cast</span><span class="operator">&lt;</span><span class="type"><a href="qtextedit.html">QTextEdit</a></span><span class="operator">*</span><span class="operator">&gt;</span>(letters<span class="operator">-</span><span class="operator">&gt;</span>currentWidget());
      <span class="type">QPrinter</span> printer;

      <span class="type">QPrintDialog</span> dialog(<span class="operator">&amp;</span>printer<span class="operator">,</span> <span class="keyword">this</span>);
      dialog<span class="operator">.</span>setWindowTitle(tr(<span class="string">&quot;Print Document&quot;</span>));
      <span class="keyword">if</span> (editor<span class="operator">-</span><span class="operator">&gt;</span>textCursor()<span class="operator">.</span>hasSelection())
          dialog<span class="operator">.</span>addEnabledOption(<span class="type">QAbstractPrintDialog</span><span class="operator">::</span>PrintSelection);
      <span class="keyword">if</span> (dialog<span class="operator">.</span>exec() <span class="operator">!</span><span class="operator">=</span> <span class="type"><a href="qdialog.html">QDialog</a></span><span class="operator">::</span>Accepted) {
          <span class="keyword">return</span>;
      }

      editor<span class="operator">-</span><span class="operator">&gt;</span>print(<span class="operator">&amp;</span>printer);
  <span class="preprocessor">#endif</span>
  }

</pre>
<p>This function also allows the user to print a selected area with <a href="../qtgui/qtextcursor.html#hasSelection">QTextCursor::hasSelection</a>(), instead of printing the entire document.</p>
<a name="main-function"></a>
<h2 id="main-function"><code>main()</code> Function</h2>
<p>The <code>main()</code> function instantiates <code>MainWindow</code> and sets its size to 640x480 pixels before invoking the <code>show()</code> function and <code>createSample()</code> function.</p>
<pre class="cpp">

  <span class="type">int</span> main(<span class="type">int</span> argc<span class="operator">,</span> <span class="type">char</span> <span class="operator">*</span>argv<span class="operator">[</span><span class="operator">]</span>)
  {
      <span class="type"><a href="qapplication.html">QApplication</a></span> app(argc<span class="operator">,</span> argv);
      MainWindow window;
      window<span class="operator">.</span>resize(<span class="number">640</span><span class="operator">,</span> <span class="number">480</span>);
      window<span class="operator">.</span>show();
      window<span class="operator">.</span>createSample();
      <span class="keyword">return</span> app<span class="operator">.</span>exec();
  }

</pre>
<p>文件：</p>
<ul>
<li><a href="qtwidgets-richtext-orderform-detailsdialog-cpp.html">richtext/orderform/detailsdialog.cpp</a></li>
<li><a href="qtwidgets-richtext-orderform-detailsdialog-h.html">richtext/orderform/detailsdialog.h</a></li>
<li><a href="qtwidgets-richtext-orderform-main-cpp.html">richtext/orderform/main.cpp</a></li>
<li><a href="qtwidgets-richtext-orderform-mainwindow-cpp.html">richtext/orderform/mainwindow.cpp</a></li>
<li><a href="qtwidgets-richtext-orderform-mainwindow-h.html">richtext/orderform/mainwindow.h</a></li>
<li><a href="qtwidgets-richtext-orderform-orderform-pro.html">richtext/orderform/orderform.pro</a></li>
</ul>
</div>
<!-- @@@richtext/orderform -->
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2018 The Qt Company Ltd.
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the Free Software Foundation.<br/>    Qt and respective logos are trademarks of The Qt Company Ltd.     in Finland and/or other countries worldwide. All other trademarks are property
   of their respective owners. </p>
</div>
</body>
</html>
